v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
P 4 1 850 110 {}
N 810 -130 810 -60 {lab=Vdac}
N 810 -130 940 -130 {lab=Vdac}
N -330 -130 -330 -60 {lab=Vdac}
N 0 -130 0 -60 {lab=Vdac}
N 250 -130 250 -60 {lab=Vdac}
N 530 -130 530 -60 {lab=Vdac}
N 1030 0 1030 70 {lab=avss}
N 810 0 810 70 {lab=VC1}
N 530 0 530 70 {lab=VC2}
N 250 0 250 70 {lab=VC4}
N 0 0 0 70 {lab=VC8}
N -330 0 -330 70 {lab=VC16}
N -610 -130 -610 -60 {lab=Vdac}
N 1030 -130 1030 -60 {lab=Vdac}
N -610 0 -610 70 {lab=VC32}
N 1030 -130 1160 -130 {lab=Vdac}
N 1030 70 1030 220 {lab=avss}
N -610 -130 -520 -130 {lab=Vdac}
N -470 -130 760 -130 {lab=Vdac}
N -650 80 -650 170 {lab=VC32}
N -650 70 -610 70 {lab=VC32}
N -650 70 -650 80 {lab=VC32}
N -360 70 -360 170 {lab=VC16}
N -360 70 -330 70 {lab=VC16}
N -40 80 -40 170 {lab=VC8}
N -40 70 -40 80 {lab=VC8}
N -40 70 0 70 {lab=VC8}
N 210 70 210 170 {lab=VC4}
N 210 70 250 70 {lab=VC4}
N 450 70 450 160 {lab=VC2}
N 450 70 530 70 {lab=VC2}
N 720 70 720 160 {lab=VC1}
N 720 70 810 70 {lab=VC1}
N -770 -100 -720 -100 {lab=avdd}
N -770 -60 -710 -60 {lab=avss}
N -650 290 -650 340 {lab=Vref}
N -700 110 -700 170 {lab=avdd}
N -820 230 -770 230 {lab=#net1}
N -410 140 -410 170 {lab=avdd}
N -410 140 -140 140 {lab=avdd}
N -90 140 -90 170 {lab=avdd}
N -90 140 160 140 {lab=avdd}
N 160 140 160 170 {lab=avdd}
N 160 140 400 140 {lab=avdd}
N 400 140 400 160 {lab=avdd}
N 400 140 670 140 {lab=avdd}
N 670 140 670 160 {lab=avdd}
N -410 290 -410 320 {lab=avss}
N -410 320 -140 320 {lab=avss}
N -90 290 -90 320 {lab=avss}
N -90 320 160 320 {lab=avss}
N 160 290 160 320 {lab=avss}
N 160 320 400 320 {lab=avss}
N 400 280 400 320 {lab=avss}
N 400 320 670 320 {lab=avss}
N 670 280 670 320 {lab=avss}
N 1030 220 1030 310 {lab=avss}
N 910 340 940 340 {lab=Vref}
N -360 290 -360 340 {lab=Vref}
N -40 290 -40 340 {lab=Vref}
N 210 290 210 340 {lab=Vref}
N 450 280 450 340 {lab=Vref}
N 720 280 720 340 {lab=Vref}
N -530 320 -410 320 {lab=avss}
N -540 230 -480 230 {lab=#net2}
N -200 230 -160 230 {lab=#net3}
N -140 140 -90 140 {lab=avdd}
N 760 -130 810 -130 {lab=Vdac}
N 760 340 910 340 {lab=Vref}
N -140 320 -90 320 {lab=avss}
N -750 320 -530 320 {lab=avss}
N -520 -130 -470 -130 {lab=Vdac}
N -700 140 -410 140 {lab=avdd}
N -700 290 -700 320 {lab=avss}
N -700 340 760 340 {lab=Vref}
N -540 230 -540 360 {lab=#net2}
N -210 230 -210 370 {lab=#net3}
N -210 230 -200 230 {lab=#net3}
N 60 230 60 360 {lab=#net4}
N 60 230 80 230 {lab=#net4}
N 80 230 90 230 {lab=#net4}
N 300 220 300 370 {lab=#net5}
N 300 220 320 220 {lab=#net5}
N 320 220 330 220 {lab=#net5}
N 580 220 580 370 {lab=#net6}
N 580 220 600 220 {lab=#net6}
N -1240 460 -1240 510 {lab=avss}
N -1240 350 -1240 400 {lab=avdd}
N -950 530 -950 560 {lab=GND}
N -950 340 -890 340 {lab=#net1}
N -890 340 -820 340 {lab=#net1}
N -600 540 -600 570 {lab=GND}
N -950 340 -950 450 {lab=#net1}
N -950 450 -950 470 {lab=#net1}
N -270 550 -270 580 {lab=GND}
N -270 470 -270 490 {lab=#net3}
N -270 370 -270 470 {lab=#net3}
N -270 370 -210 370 {lab=#net3}
N 0 540 0 570 {lab=GND}
N 0 460 0 480 {lab=#net4}
N 0 360 0 460 {lab=#net4}
N 0 360 60 360 {lab=#net4}
N 240 550 240 580 {lab=GND}
N 240 470 240 490 {lab=#net5}
N 240 370 240 470 {lab=#net5}
N 240 370 300 370 {lab=#net5}
N 520 550 520 580 {lab=GND}
N 520 470 520 490 {lab=#net6}
N 520 370 520 470 {lab=#net6}
N 520 370 580 370 {lab=#net6}
N -600 540 -600 570 {lab=GND}
N -600 460 -600 480 {lab=#net2}
N -600 360 -540 360 {lab=#net2}
N -1140 450 -1140 500 {lab=GND}
N -1140 340 -1140 390 {lab=avss}
N 810 550 810 580 {lab=GND}
N 810 470 810 490 {lab=Vref}
N 810 370 810 470 {lab=Vref}
N -720 -100 -690 -100 {lab=avdd}
N -690 -100 -670 -100 {lab=avdd}
N -710 -60 -670 -60 {lab=avss}
N -600 360 -600 460 {lab=#net2}
N -690 -100 -670 -100 {lab=avdd}
N 810 340 810 370 {lab=Vref}
N 670 320 940 320 {lab=avss}
N 940 320 1030 320 {lab=avss}
N 1030 310 1030 320 {lab=avss}
N 940 -130 1030 -130 {lab=Vdac}
N -820 230 -820 340 {lab=#net1}
C {symbols/cap_mim_1f0fF.sym} 530 -30 0 0 {name=C3
W=10e-6
L=10e-6
model=cap_mim_2f0_m3m4_noshield
spiceprefix=X
m=4}
C {symbols/cap_mim_1f0fF.sym} 250 -30 0 0 {name=C4
W=10e-6
L=10e-6
model=cap_mim_2f0_m3m4_noshield
spiceprefix=X
m=8}
C {symbols/cap_mim_1f0fF.sym} 0 -30 0 0 {name=C5
W=10e-6
L=10e-6
model=cap_mim_2f0_m3m4_noshield
spiceprefix=X
m=16}
C {symbols/cap_mim_1f0fF.sym} -330 -30 0 0 {name=C6
W=10e-6
L=10e-6
model=cap_mim_2f0_m3m4_noshield
spiceprefix=X
m=32}
C {symbols/cap_mim_1f0fF.sym} -610 -30 0 0 {name=C7
W=10e-6
L=10e-6
model=cap_mim_2f0_m3m4_noshield
spiceprefix=X
m=64}
C {iopin.sym} 940 340 0 0 {name=p1 lab=Vref}
C {iopin.sym} 810 70 1 0 {name=p2 lab=VC1}
C {iopin.sym} 530 70 1 0 {name=p3 lab=VC2}
C {iopin.sym} 250 70 1 0 {name=p4 lab=VC4}
C {iopin.sym} 0 70 1 0 {name=p5 lab=VC8}
C {iopin.sym} -330 70 1 0 {name=p6 lab=VC16}
C {iopin.sym} -610 70 1 0 {name=p7 lab=VC32}
C {iopin.sym} 1160 -130 0 0 {name=p8 lab=Vdac}
C {iopin.sym} -770 -100 2 0 {name=p9 lab=avdd}
C {iopin.sym} -770 -60 2 0 {name=p10 lab=avss}
C {lab_wire.sym} -680 -100 0 0 {name=p13 sig_type=std_logic lab=avdd}
C {lab_wire.sym} -690 -60 0 0 {name=p14 sig_type=std_logic lab=avss}
C {lab_wire.sym} -700 140 0 0 {name=p15 sig_type=std_logic lab=avdd}
C {lab_wire.sym} -700 320 0 0 {name=p16 sig_type=std_logic lab=avss}
C {vsource.sym} -1240 430 0 1 {name=V1 value=3.3 savecurrent=false}
C {gnd.sym} -950 560 0 0 {name=l6 lab=GND}
C {vsource.sym} 520 520 0 0 {name=Vbit1 value=0 savecurrent=false}
C {vsource.sym} 240 520 0 0 {name=Vbit2 value=3.3 savecurrent=false}
C {gnd.sym} -270 580 0 0 {name=l4 lab=GND}
C {vsource.sym} 0 510 0 0 {name=Vbit3 value=3.3 savecurrent=false}
C {gnd.sym} 0 570 0 0 {name=l5 lab=GND}
C {vsource.sym} -270 520 0 0 {name=Vbit4 value=3.3 savecurrent=false}
C {gnd.sym} 240 580 0 0 {name=l7 lab=GND}
C {vsource.sym} -600 510 0 0 {name=Vbit5 value=3.3 savecurrent=false}
C {gnd.sym} 520 580 0 0 {name=l8 lab=GND}
C {vsource.sym} -950 500 0 0 {name=Vbit6 value=3.3 savecurrent=false}
C {gnd.sym} -600 570 0 0 {name=l9 lab=GND}
C {vsource.sym} -1140 420 0 1 {name=V2 value=0 savecurrent=false}
C {gnd.sym} -1140 500 0 0 {name=l11 lab=GND}
C {lab_wire.sym} -1140 370 0 0 {name=p11 sig_type=std_logic lab=avss}
C {devices/code_shown.sym} -280 -330 0 0 {name=MODELS1 only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
.lib $::180MCU_MODELS/sm141064.ngspice cap_mim
.lib $::180MCU_MODELS/sm141064.ngspice res_typical
.lib $::180MCU_MODELS/sm141064.ngspice moscap_typical
.lib $::180MCU_MODELS/sm141064.ngspice mimcap_typical
* .lib $::180MCU_MODELS/sm141064.ngspice res_statistical
"}
C {devices/code_shown.sym} -1235 -345 0 0 {name=NGSPICE1 only_toplevel=true value="

.control
save all
op
show all
.probe v(Vdac)
alter @Vbit3[DC] = 0
dc Vref 0.8 1.2 0.1
setplot dc1
let Vout = v(Vdac)
plot Vout
tran 10m 30m
setplot tran1
let Vout = v(Vdac)
plot Vout

alter @Vbit3[DC] = 3.3
alter @Vbit5[DC] = 0
dc Vref 0.8 1.2 0.1
setplot dc2
let Vout = v(Vdac)
plot Vout
tran 10m 30m
setplot tran2
let Vout = v(Vdac)
plot Vout
write "TB_CDAC_v1.raw"
.endc
"
}
C {vsource.sym} 810 520 0 0 {name=Vref value=1.2 savecurrent=false}
C {gnd.sym} 810 580 0 0 {name=l10 lab=GND}
C {lab_wire.sym} -1240 360 0 0 {name=p12 sig_type=std_logic lab=avdd}
C {lab_wire.sym} -1240 490 0 0 {name=p23 sig_type=std_logic lab=avss}
C {symbols/cap_mim_analog.sym} 1030 -30 0 0 {name=C1
W=10e-6
L=10e-6
model=cap_mim_2f0_m3m4_noshield
spiceprefix=X
m=2}
C {symbols/cap_mim_analog.sym} 810 -30 0 0 {name=C2
W=10e-6
L=10e-6
model=cap_mim_2f0_m3m4_noshield
spiceprefix=X
m=2}
C {libs/WK_Kadam/c_dac1_switch.sym} -680 230 0 0 {name=x1}
C {libs/WK_Kadam/c_dac1_switch.sym} -390 230 0 0 {name=x2}
C {libs/WK_Kadam/c_dac1_switch.sym} -70 230 0 0 {name=x3}
C {libs/WK_Kadam/c_dac1_switch.sym} 180 230 0 0 {name=x4}
C {libs/WK_Kadam/c_dac1_switch.sym} 420 220 0 0 {name=x5}
C {libs/WK_Kadam/c_dac1_switch.sym} 690 220 0 0 {name=x6}
